{"version":3,"sources":["components/figureMap/FigureMap.jsx","utils.js","components/figureDistrib/FigureDistrib.jsx","components/figureTerrestrial/FigureTerrestrial.jsx","components/figureMarine/FigureMarine.jsx","components/figureTree/FigureTree.jsx","components/header/Header.jsx","components/navbar/Navbar.jsx","components/slider/Slider.jsx","App.js","index.js","data/worldMap.geojson","assets/logo.svg","data/iucn_red_list.csv"],"names":["FigureMap","_ref","selectedCountry","setSelectedCountry","selectedYear","iucnRedListCSV","mapColor","projection","d3","center","geoGenerator","borderRef","useRef","legendRef","colorScale","domain","map","x","Math","pow","interpolator","legend","color","arguments","length","undefined","title","_ref$tickSize","tickSize","_ref$width","width","_ref$height","height","_ref$marginTop","marginTop","_ref$marginRight","marginRight","_ref$marginBottom","marginBottom","_ref$marginLeft","marginLeft","_ref$ticks","ticks","tickFormat","tickValues","ramp","n","canvas","document","createElement","context","getContext","i","fillStyle","fillRect","svg","attr","style","tickAdjust","g","selectAll","interpolate","min","range","copy","rangeRound","append","toDataURL","Object","assign","round","invertExtent","thresholds","quantiles","thresholdFormat","d","data","join","max","bandwidth","concat","call","select","remove","text","node","MapLegend","useEffect","current","innerHTML","appendChild","_useState","useState","_useState2","_slicedToArray","countryColorMap","setCountryColorMap","_useState3","_useState4","countryIndexMap","setCountryIndexMap","handleMouseClick","e","properties","name","get","then","tmpMap","Map","forEach","countryName","Country","year","Year","set","tmpIndexMap","index","worldMap","geojson","features","enter","on","iucn","border","filter","empty","path","cloneNode","React","className","id","viewBox","ref","FigureDistrib","countryIucnCatRepartition","countrySpeciesRepartition","graphRefGeneral","graphRefSpecies","graphLegendRef","colors","labelColorMap","svg_base","keys","values","size","createLegend","Critical","Endangered","Vulnerable","Least Concern","colorsMap","CRITICAL","ENDANGERED","VULNERABLE","LEAST_CONCERN","tmp_data","JSON","parse","stringify","category","totKnownCategory","find","obj","leastConcernValue","value","reduce","total","bar","margin","categories","sort","a","b","sum","item","slice","push","padding","tickSizeOuter","y","stackedData","key","categoryData","createStackedBarChart","_ref2","_ref2$barHeight","barHeight","_ref2$f","f","_ref2$margin","top","right","bottom","left","_ref2$colors","groupData","percent","cumulative","label","groupDataFunc","sel","xScale","valueTexts","percentTexts","labelTexts","this","StackedBar","FigureTerrestrial","terrestrialJSON","Data","pointsList","pointsMap","Number","Value","yMinValue","Array","from","d2","yMaxValue","xMinValue","xMaxValue","getX","getY","linePathWorld","curve","has","linePathCountry","console","log","fill","opacity","yAxis","tickPadding","transform","xAxis","strokeWidth","stroke","dy","FigureMarine","marineJSON","FigureTree","src","frameBorder","Header","Navbar","logo","alt","href","Slider","setSelectedYear","sliderNotCreated","App","_useState5","iucn_red_list","terrestial","marine","ReactDOM","createRoot","getElementById","render","StrictMode","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.3b3a6dbe.chunk.js","sourcesContent":["import './figureMap.css';\nimport React, {useEffect, useRef, useState} from 'react';\nimport worldMap from '../../data/worldMap.geojson';\nimport * as d3 from 'd3';\nimport {MapLegend} from '../../utils'\n\nconst FigureMap = ({selectedCountry, setSelectedCountry, selectedYear, iucnRedListCSV}) => {\n\n    const mapColor = '#a8a8a8';\n\n    let projection = d3.geoMercator()\n        .center([-7, 60]);\n\n    let geoGenerator = d3.geoPath()\n        .projection(projection);\n\n    const borderRef = useRef(null);\n    const legendRef = useRef(null);\n    // d3.range(10).map((x) => (x ** 0.5)/10)\n\n    const colorScale = d3.scaleSequentialQuantile().domain(d3.range(101).map((x) => (x ** 0.5) / 10)).interpolator(d3.interpolateReds);\n\n\n    const legend = MapLegend(colorScale, {\n        title: \"UICN Index\",\n        ticks: 4,\n        tickFormat: \"0.3f\",\n    })\n\n    useEffect(() => {\n        legendRef.current.innerHTML = '';\n        legendRef.current.appendChild(legend);\n    });\n\n    // create a map of country names and their corresponding colors from the csv\n    // the map is {(countryName, year): color}\n    const [countryColorMap, setCountryColorMap] = useState(null);\n    const [countryIndexMap, setCountryIndexMap] = useState(null);\n    useEffect(() => {\n\n        d3.csv(iucnRedListCSV).then((data) => {\n            const tmpMap = new Map();\n            data.forEach((d) => {\n                let countryName = d.Country;\n                let year = d.Year;\n                let color = colorScale(d['Value']);\n                tmpMap.set((countryName + year), [d['Value'], color]);\n            });\n            setCountryColorMap(tmpMap);\n\n\n            const tmpIndexMap = new Map();\n            data.forEach((d) => {\n                let countryName = d.Country;\n                let year = d.Year;\n                let index = d['Value'];\n                tmpIndexMap.set((countryName + year), index);\n            });\n            setCountryIndexMap(tmpIndexMap);\n\n        });\n    }, []);\n\n    function handleMouseClick(e, d) {\n        // set the selected country\n        setSelectedCountry(d.properties.name);\n        d3.select('.figureMap__card_info').text(d.properties.name + ': ' + countryIndexMap.get((d.properties.name + selectedYear)));\n    }\n\n    useEffect(() => {\n        if(selectedCountry !== null){\n            d3.select('.figureMap__card_info').text(selectedCountry + ': ' + countryIndexMap.get((selectedCountry + selectedYear)));\n        }\n    }, [selectedYear]);\n\n\n    function update(geojson) {\n        let u = d3.select('.figureMap__card g.map')\n            .selectAll('path')\n            .data(geojson.features);\n\n        u.enter()\n            .append('path')\n            .attr('d', geoGenerator)\n            .style('fill', mapColor)\n            .style('stroke', null)\n    }\n\n    d3.json(worldMap).then((data) => {\n        update(data);\n    });\n\n    useEffect(() => {\n        // update the map color when the selected year changes\n        d3.select('.figureMap__card g.map')\n            .selectAll('path')\n            .style('fill', function (d) {\n                let countryName = d.properties.name;\n                let color = countryColorMap.get((countryName + selectedYear));\n                if (color === undefined) {\n                    return mapColor;\n                } else {\n                    return color[1];\n                }\n            })\n            .on('click', handleMouseClick);\n\n\n        // add a new attribute to each country path, which is the iucn value\n        d3.select('.figureMap__card g.map')\n            .selectAll('path')\n            .attr('iucn', function (d) {\n                let countryName = d.properties.name;\n                let iucn = countryColorMap.get((countryName + selectedYear));\n                if (iucn === undefined) {\n                    return 'N/A';\n                } else {\n                    return iucn[0];\n                }\n            });\n\n        // copy the border of the selected country to the end of the svg and set it to 2px\n        if (selectedCountry !== null) {\n            let border = d3.select('.figureMap__card g.map')\n                .selectAll('path')\n                .filter(function (d) {\n                    return d.properties.name === selectedCountry;\n                });\n            if (border.empty()) {\n                return;\n            }\n\n            // copy d of the selected country\n            let path = border.node().cloneNode(true);\n\n            // set the border to 2px\n            d3.select(path).style('stroke', 'black').style('stroke-width', '2px');\n\n            // user borderRef to access the border element\n            borderRef.current.innerHTML = '';\n            borderRef.current.appendChild(path);\n\n        }\n\n    }, [selectedYear, countryColorMap, selectedCountry]);\n\n    return (\n        <div className=\"figureMap__card\">\n            <h1 className='figureMap__card_title'>World Map IUCN Red List</h1>\n            <div className=\"figureMap__card_info\">Select a country</div>\n            <svg id=\"svgmap\" viewBox=\"0 0 1000 650\">\n                <g className=\"map\"></g>\n                <g className='border' ref={borderRef}></g>\n\n            </svg>\n            <div className=\"figureMap__card_legend\" ref={legendRef}></div>\n        </div>\n    );\n};\n\nexport default FigureMap;\n","import * as d3 from 'd3';\n\n\n//-----LEGEND-----//\n// Copyright 2021, Observable Inc.\n// Released under the ISC license.\n// https://observablehq.com/@d3/color-legend\nexport function MapLegend(color, {\n\n    title,\n    tickSize = 6,\n    width = 320,\n    height = 44 + tickSize,\n    marginTop = 18,\n    marginRight = 0,\n    marginBottom = 16 + tickSize,\n    marginLeft = 0,\n    ticks = width / 64,\n    tickFormat,\n    tickValues\n} = {}) {\n\n    function ramp(color, n = 256) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = n;\n        canvas.height = 1;\n        const context = canvas.getContext(\"2d\");\n        for (let i = 0; i < n; ++i) {\n            context.fillStyle = color(i / (n - 1));\n            context.fillRect(i, 0, 1, 1);\n        }\n        return canvas;\n    }\n\n    const svg = d3.create(\"svg\")\n        .attr(\"width\", \"40%\")\n        .attr(\"viewBox\", [0, 0, width, height])\n        .style(\"overflow\", \"visible\")\n        .style(\"display\", \"block\");\n\n    let tickAdjust = g => g.selectAll(\".tick line\").attr(\"y1\", marginTop + marginBottom - height);\n    let x;\n\n    // Continuous\n    if (color.interpolate) {\n        const n = Math.min(color.domain().length, color.range().length);\n\n        x = color.copy().rangeRound(d3.quantize(d3.interpolate(marginLeft, width - marginRight), n));\n\n        svg.append(\"image\")\n            .attr(\"x\", marginLeft)\n            .attr(\"y\", marginTop)\n            .attr(\"width\", width - marginLeft - marginRight)\n            .attr(\"height\", height - marginTop - marginBottom)\n            .attr(\"preserveAspectRatio\", \"none\")\n            .attr(\"xlink:href\", ramp(color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))).toDataURL());\n    }\n\n    // Sequential\n    else if (color.interpolator) {\n        x = Object.assign(color.copy()\n                .interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\n            {\n                range() {\n                    return [marginLeft, width - marginRight];\n                }\n            });\n\n        svg.append(\"image\")\n            .attr(\"x\", marginLeft)\n            .attr(\"y\", marginTop)\n            .attr(\"width\", width - marginLeft - marginRight)\n            .attr(\"height\", height - marginTop - marginBottom)\n            .attr(\"preserveAspectRatio\", \"none\")\n            .attr(\"xlink:href\", ramp(color.interpolator()).toDataURL());\n\n        // scaleSequentialQuantile doesn’t implement ticks or tickFormat.\n        if (!x.ticks) {\n            if (tickValues === undefined) {\n                const n = Math.round(ticks + 1);\n                tickValues = d3.range(n).map(i => d3.quantile(color.domain(), i / (n - 1)));\n            }\n            if (typeof tickFormat !== \"function\") {\n                tickFormat = d3.format(tickFormat === undefined ? \",f\" : tickFormat);\n            }\n        }\n    }\n\n    // Threshold\n    else if (color.invertExtent) {\n        const thresholds\n            = color.thresholds ? color.thresholds() // scaleQuantize\n            : color.quantiles ? color.quantiles() // scaleQuantile\n                : color.domain(); // scaleThreshold\n\n        const thresholdFormat\n            = tickFormat === undefined ? d => d\n            : typeof tickFormat === \"string\" ? d3.format(tickFormat)\n                : tickFormat;\n\n        x = d3.scaleLinear()\n            .domain([-1, color.range().length - 1])\n            .rangeRound([marginLeft, width - marginRight]);\n\n        svg.append(\"g\")\n            .selectAll(\"rect\")\n            .data(color.range())\n            .join(\"rect\")\n            .attr(\"x\", (d, i) => x(i - 1))\n            .attr(\"y\", marginTop)\n            .attr(\"width\", (d, i) => x(i) - x(i - 1))\n            .attr(\"height\", height - marginTop - marginBottom)\n            .attr(\"fill\", d => d);\n\n        tickValues = d3.range(thresholds.length);\n        tickFormat = i => thresholdFormat(thresholds[i], i);\n    }\n\n    // Ordinal\n    else {\n        x = d3.scaleBand()\n            .domain(color.domain())\n            .rangeRound([marginLeft, width - marginRight]);\n\n        svg.append(\"g\")\n            .selectAll(\"rect\")\n            .data(color.domain())\n            .join(\"rect\")\n            .attr(\"x\", x)\n            .attr(\"y\", marginTop)\n            .attr(\"width\", Math.max(0, x.bandwidth() - 1))\n            .attr(\"height\", height - marginTop - marginBottom)\n            .attr(\"fill\", color);\n\n        tickAdjust = () => {\n        };\n    }\n\n    svg.append(\"g\")\n        .attr(\"transform\", `translate(0,${height - marginBottom})`)\n        .call(d3.axisBottom(x)\n            .ticks(ticks, typeof tickFormat === \"string\" ? tickFormat : undefined)\n            .tickFormat(typeof tickFormat === \"function\" ? tickFormat : undefined)\n            .tickSize(tickSize)\n            .tickValues(tickValues))\n        .call(tickAdjust)\n        .call(g => g.select(\".domain\").remove())\n        .call(g => g.append(\"text\")\n            .attr(\"x\", marginLeft)\n            .attr(\"y\", marginTop + marginBottom - height - 6)\n            .attr(\"fill\", \"currentColor\")\n            .attr(\"text-anchor\", \"start\")\n            .attr(\"font-weight\", \"bold\")\n            .attr(\"class\", \"title\")\n            .text(title));\n\n    return svg.node();\n}\n\n// Was adapted and made responsive\n// from https://observablehq.com/@eesur/d3-single-stacked-bar\nexport function StackedBar(data, {\n    barHeight = 70,\n    f = d3.format('.1f'),\n    margin = {top: 20, right: 10, bottom: 20, left: 10},\n    colors = [\"#e41a1c\", \"#377eb8\", \"#4daf4a\", \"#984ea3\", \"#ff7f00\", \"#ffff33\"]\n} = {}) {\n    // Have a total of values for reference from the data:\n    const total = d3.sum(data, (d) => d.value);\n\n    // Format the data (instead of using d3.stack()) and filter out 0 values:\n    function groupDataFunc(data) {\n        // use a scale to get percentage values\n        const percent = d3\n            .scaleLinear()\n            .domain([0, total])\n            .range([0, 100]);\n        // filter out data that has zero values\n        // also get mapping for next placement\n        // (save having to format data for d3 stack)\n        let cumulative = 0;\n        const _data = data\n            .map((d) => {\n                cumulative += d.value;\n                return {\n                    value: d.value,\n                    // want the cumulative to prior value (start of rect)\n                    cumulative: cumulative - d.value,\n                    label: d.label,\n                    percent: percent(d.value),\n                };\n            })\n            .filter((d) => d.value > 0);\n        return _data;\n    }\n\n    const groupData = groupDataFunc(data);\n\n    const svg = d3\n        .create(\"svg\")\n        .attr(\"class\", \"stacked-bar-chart\")\n        .attr(\"viewBox\", \"0 0 300 150\")\n        .style(\"width\", \"500px\")\n        .style(\"max-height\", \"100%\")\n        .style(\"max-width\", \"100%\");\n\n    const sel = d3.select(svg.node());\n\n    // set up scales for horizontal placement\n    const xScale = d3.scaleLinear().domain([0, total]).range([5, 100]);\n\n    const join = sel\n        .selectAll(\"g\")\n        .data(groupData)\n        .join(\"g\")\n        .attr(\n            \"transform\",\n            `translate(${margin.left} ${margin.top})`\n        );\n\n    // stack rect for each data value\n    const rects = join\n        .append(\"rect\")\n        .attr(\"class\", \"rect-stacked\")\n        .attr(\"x\", (d) => xScale(d.cumulative) + \"%\")\n        .attr(\"y\", \"15%\")\n        .attr(\"height\", barHeight)\n        .attr(\"width\", (d) => xScale(d.value) + \"%\")\n        .style(\"fill\", (d, i) => colors[i]);\n\n    // add values on bar\n    const valueTexts = join\n        .append(\"text\")\n        .attr(\"class\", \"text-value\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"x\", (d) => xScale(d.cumulative) + xScale(d.value) / 2 + \"%\")\n        .attr(\"y\", \"13%\")\n        .style(\"font-weight\", \"bold\")\n        .text((d) => d.value);\n\n    // add some labels for percentages\n    const percentTexts = join\n        .append(\"text\")\n        .attr(\"class\", \"text-percent\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"x\", (d) => xScale(d.cumulative) + xScale(d.value) / 2 + \"%\")\n        .attr(\"y\", \"70%\")\n        .style(\"font-weight\", \"bold\")\n        .text((d) => f(d.percent) + \" %\");\n\n    // add the labels\n    const labelTexts = join\n        .append(\"text\")\n        .attr(\"class\", \"text-label\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"x\", (d) => xScale(d.cumulative) + xScale(d.value) / 2 + \"%\")\n        .attr(\"y\", \"80%\")\n        .style(\"fill\", (d, i) => colors[i])\n        .style(\"font-weight\", \"bold\")\n        .text((d) => d.label);\n\n    valueTexts.style(\"opacity\", 0);\n    percentTexts.style(\"opacity\", 0);\n    labelTexts.style(\"opacity\", 0);\n\n    join.on(\"mouseover\", function () {\n        const bar = d3.select(this);\n        bar.select(\".text-value\").style(\"opacity\", 1);\n        bar.select(\".text-percent\").style(\"opacity\", 1);\n        bar.select(\".text-label\").style(\"opacity\", 1);\n    });\n\n    join.on(\"mouseout\", function () {\n        const bar = d3.select(this);\n        bar.select(\".text-value\").style(\"opacity\", 0);\n        bar.select(\".text-percent\").style(\"opacity\", 0);\n        bar.select(\".text-label\").style(\"opacity\", 0);\n    });\n\n\n    return svg.node();\n}\n\nexport function createLegend(labelColorMap) {\n    const svg_base = d3\n        .create(\"svg\")\n        .attr(\"class\", \"stacked-bar-chart\")\n        .attr(\"viewBox\", \"0 0 300 150\")\n        .style(\"width\", \"500px\")\n        // .style(\"height\", \"100px\")\n        .style(\"max-height\", \"100%\")\n        .style(\"max-width\", \"100%\");\n    const svg = d3.select(svg_base.node());\n\n    // Extract the keys and colors from the labelColorMap\n    let keys = Object.keys(labelColorMap);\n    let colors = Object.values(labelColorMap);\n\n    // Define the color scale\n    let color = d3.scaleOrdinal()\n        .domain(keys)\n        .range(colors);\n\n    // Add dots in the legend for each name\n    let size = 15;\n    svg.selectAll(\"color_squares\")\n        .data(keys)\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", 10)\n        .attr(\"y\", function (d, i) {\n            return i * (size + 5);\n        })\n        .attr(\"width\", size)\n        .attr(\"height\", size)\n        .style(\"fill\", function (d) {\n            return color(d);\n        });\n\n    // Add labels in the legend for each name\n    svg.selectAll(\"labels\")\n        .data(keys)\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", 10 + size * 1.2)\n        .attr(\"y\", function (d, i) {\n            return i * (size + 5) + (size / 2);\n        })\n        // .style(\"fill\", function (d) {\n        //     return color(d);\n        // })\n        .text(function (d) {\n            return d;\n        })\n        .attr(\"text-anchor\", \"left\")\n        .style(\"alignment-baseline\", \"middle\");\n\n    return svg.node();\n}\n\n// https://d3-graph-gallery.com/graph/barplot_stacked_basicWide.html\nexport function createStackedBarChart(data, colorsMap) {\n\n    // Set the dimensions and margins of the graph\n    let margin = {top: 10, right: 10, bottom: 10, left: 10},\n        width = 700 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n\n    // Append the SVG object to the body of the page\n    const svg_base = d3\n        .create(\"svg\")\n        .attr(\"viewBox\", \"0 0 700 500\")\n        .attr(\"width\", width + margin.left + margin.right)\n        // .attr(\"height\", height + margin.top + margin.bottom)\n        .style(\"max-height\", \"100%\")\n        .style(\"max-width\", \"100%\");\n    const svg = d3.select(svg_base.node());\n\n\n    // Extract the categories from the data\n    let categories = Object.keys(data);\n\n    // sort the categories by the total value\n    categories.sort(function (a, b) {\n        return data[b].reduce(function (sum, item) {\n            return sum + item.value;\n        }, 0) - data[a].reduce(function (sum, item) {\n            return sum + item.value;\n        }, 0);\n    });\n\n    categories = categories.slice(0, 5);\n\n    // Extract the subgroups and values for each category\n    let subgroups = ['CRITICAL', 'ENDANGERED', 'VULNERABLE', 'LEAST_CONCERN'];\n    let values = [];\n    categories.forEach(function (category) {\n        let categoryData = data[category];\n        categoryData.forEach(function (item) {\n            values.push(item.value);\n        });\n    });\n\n    // Add X axis\n    let x = d3\n        .scaleBand()\n        .domain(categories)\n        .range([0, width])\n        .padding([0.2]);\n    svg\n        .append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(d3.axisBottom(x).tickSizeOuter(0));\n\n    // Add Y axis\n    let y = d3.scaleLinear().domain([0, d3.max(values)]).range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // Stack the data\n    let stackedData = d3\n        .stack()\n        .keys(subgroups)\n        .value(function (d, key) {\n            let categoryData = data[d];\n            let value = 0;\n            categoryData.forEach(function (item) {\n                if (item.category === key) {\n                    value = item.value;\n                }\n            });\n            return value;\n        })(categories);\n\n    // Show the bars\n    svg\n        .append(\"g\")\n        .selectAll(\"g\")\n        // Enter in the stack data\n        .data(stackedData)\n        .enter()\n        .append(\"g\")\n        .attr(\"fill\", function (d) {\n            return colorsMap[d.key];\n        })\n        .selectAll(\"rect\")\n        // Enter a second time to add all rectangles\n        .data(function (d) {\n            return d;\n        })\n        .enter()\n        .append(\"rect\")\n        .attr(\"x\", function (d) {\n            return x(d.data);\n        })\n        .attr(\"y\", function (d) {\n            return y(d[1]);\n        })\n        .attr(\"height\", function (d) {\n            return y(d[0]) - y(d[1]);\n        })\n        .attr(\"width\", x.bandwidth());\n\n    return svg.node();\n}\n","import React, {useEffect, useRef} from 'react';\nimport './figureDistrib.css';\n\nimport {createLegend, createStackedBarChart, StackedBar} from '../../utils'\nimport * as d3 from \"d3\";\n\n\nconst FigureDistrib = ({countryIucnCatRepartition, countrySpeciesRepartition, selectedCountry}) => {\n\n    const graphRefGeneral = useRef(null);\n    const graphRefSpecies = useRef(null);\n    const graphLegendRef = useRef(null);\n\n    const colors = ['#d51415', '#f5a031', '#f8cd26', '#a0a0a0'];\n\n    const legend = createLegend({\n        'Critical': colors[0],\n        'Endangered': colors[1],\n        'Vulnerable': colors[2],\n        'Least Concern': colors[3],\n    })\n\n    const colorsMap = {\n        'CRITICAL': colors[0],\n        'ENDANGERED': colors[1],\n        'VULNERABLE': colors[2],\n        'LEAST_CONCERN': colors[3],\n    }\n\n    useEffect(() => {\n\n        graphRefSpecies.current.innerHTML = '';\n\n        const tmp_data = countrySpeciesRepartition[selectedCountry];\n        const data = tmp_data ? JSON.parse(JSON.stringify(tmp_data)) : tmp_data;\n\n\n        if (!data) {\n            if (!selectedCountry) {\n                d3.select('.figureVulnerabilities__card_info').text('Select a country');\n            } else {\n                d3.select('.figureVulnerabilities__card_info').text('Select another country');\n            }\n            return;\n        }\n\n        for (const category in data) {\n            // Find the category object with \"TOT_KNOWN\" as the category value\n            const totKnownCategory = data[category].find(obj => obj.category === \"TOT_KNOWN\");\n\n            // Calculate the \"LEAST_CONCERN\" value\n            const leastConcernValue = totKnownCategory.value - data[category]\n                .filter(obj => obj.category !== \"TOT_KNOWN\")\n                .reduce((total, obj) => total + obj.value, 0);\n\n            // Replace the \"TOT_KNOWN\" category object with \"LEAST_CONCERN\"\n            totKnownCategory.category = \"LEAST_CONCERN\";\n            totKnownCategory.value = leastConcernValue;\n        }\n\n\n        const bar = createStackedBarChart(data, colorsMap);\n        graphRefSpecies.current.appendChild(bar);\n        // graphLegendRef.current.appendChild(legend);\n        d3.select('.figureVulnerabilities__card_info').text(selectedCountry);\n\n    }, [selectedCountry]);\n\n\n\n    useEffect(() => {\n\n        graphRefGeneral.current.innerHTML = '';\n        graphLegendRef.current.innerHTML = '';\n\n        let d = countryIucnCatRepartition[selectedCountry];\n        if (!d) {\n            if (!selectedCountry) {\n                d3.select('.figureDistrib__card_info').text('Select a country');\n            } else {\n                d3.select('.figureDistrib__card_info').text('Select another country');\n            }\n            return;\n        }\n\n        let data = [\n            {label: 'CR', value: d['CRITICAL']},\n            {label: 'EN', value: d['ENDANGERED']},\n            {label: 'VU', value: d['VULNERABLE']},\n            {label: 'LC', value: d['TOT_KNOWN'] - d['CRITICAL'] - d['ENDANGERED'] - d['VULNERABLE']}\n        ]\n        const bar = StackedBar(data, {\n            colors: colors,\n        })\n        graphRefGeneral.current.appendChild(bar);\n        graphLegendRef.current.appendChild(legend);\n        d3.select('.figureDistrib__card_info').text(selectedCountry);\n\n    }, [selectedCountry]);\n\n\n    return (\n        <div className=\"figureDistrib\" id=\"figureDistrib\">\n            <div className=\"figureDistrib__card\">\n                <h1 className='figureDistrib__card_title'>Repartition in the IUCN Categories</h1>\n                <div className=\"figureDistrib__card_info\">Select a country</div>\n                <table>\n                    <tbody>\n                    <tr>\n                        <td>\n                            <div className=\"figureDistrib__card_graph_general\" ref={graphRefGeneral}></div>\n                        </td>\n                        <td>\n                            <div className=\"figureDistrib__card_graph_species\" ref={graphRefSpecies}></div>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n                <div className=\"figureDistrib__card_legend\" ref={graphLegendRef}></div>\n            </div>\n        </div>\n    );\n};\n\nexport default FigureDistrib;","import React, {useEffect, useRef, useState} from 'react';\r\nimport * as d3 from 'd3';\r\nimport './figureTerrestrial.css';\r\n\r\nconst FigureTerrestrial = ({selectedCountry, selectedYear, terrestrialJSON}) => {\r\n\r\n    const margin = { top: 40, right: 50, bottom: 60, left: 60 },\r\n    width = 960 - margin.left - margin.right,\r\n    height = 400 - margin.top - margin.bottom,\r\n    colorWorld = \"DarkGreen\",\r\n    colorCountry = \"Green\";\r\n\r\n    // import data from terrestrialJSON\r\n    const tmpMap = new Map();\r\n    terrestrialJSON.forEach((d) => {\r\n        let countryName = d.Country;\r\n        let data = d.Data;\r\n        const pointsList = [];\r\n        data.forEach((d) => {\r\n            const pointsMap = new Map();\r\n            let year = Number(d.Year);\r\n            let value = Number(d.Value);\r\n            pointsMap.set('year', year);\r\n            pointsMap.set('value', value);\r\n            pointsList.push(pointsMap);\r\n        });\r\n        tmpMap.set(countryName, pointsList);\r\n    });\r\n       \r\n    const yMinValue = d3.min(Array.from(tmpMap.values()), (d) => d3.min(d, (d2) => d2.get('value')))\r\n    const yMaxValue = d3.max(Array.from(tmpMap.values()), (d) => d3.max(d, (d2) => d2.get('value')))\r\n\r\n    const xMinValue = d3.min(Array.from(tmpMap.values()), (d) => d3.min(d, (d2) => d2.get('year')))\r\n    const xMaxValue = d3.max(Array.from(tmpMap.values()), (d) => d3.max(d, (d2) => d2.get('year')))\r\n\r\n    const getX = d3\r\n                .scaleTime()\r\n                .domain([xMinValue, xMaxValue])\r\n                .range([0, width]);\r\n\r\n    const getY = d3\r\n                .scaleLinear()\r\n                .domain([yMinValue - 1, yMaxValue + 2])\r\n                .range([height, 0]);\r\n\r\n    const getXAxis = (ref) => {\r\n        const xAxis = d3.axisBottom(getX);\r\n        d3.select(ref)\r\n        .attr(\"class\", \"x-axis\")\r\n        .call(xAxis.tickFormat(d3.format(\"d\")));\r\n    };\r\n\r\n    const getYAxis = (ref) => {\r\n        const yAxis = d3.axisLeft(getY).tickSize(-width).tickPadding(7);\r\n        d3.select(ref)\r\n        .attr(\"class\", \"y-axis\")\r\n        .call(yAxis);\r\n    };\r\n\r\n    const linePathWorld = d3\r\n                .line()\r\n                .x((d) => getX(d.get('year')))\r\n                .y((d) => getY(d.get('value')))\r\n                .curve(d3.curveMonotoneX)(tmpMap.get(\"World\"));\r\n\r\n    useEffect(() => {\r\n        if (selectedCountry !== null) {\r\n            // Remove previous path if exists, but keep the world path\r\n            d3.select(\"#figureTerrestrial\")\r\n            .select(\".figureTerrestrial__card\")\r\n            .selectAll(\".countryLine\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                const linePathCountry = d3\r\n                    .line()\r\n                    .x((d) => getX(d.get('year')))\r\n                    .y((d) => getY(d.get('value')))\r\n                    .curve(d3.curveMonotoneX)(tmpMap.get(selectedCountry));\r\n\r\n                // Add new path\r\n                d3.select(\"#figureTerrestrial\")\r\n                    .select(\".figureTerrestrial__card\")\r\n                    .append(\"path\")\r\n                    .attr(\"stroke-width\", 3)\r\n                    .attr(\"fill\", \"none\")\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                    .attr(\"stroke\", colorCountry)\r\n                    .attr(\"d\", linePathCountry)\r\n                    .attr(\"class\", \"countryLine\");\r\n            }\r\n        }        \r\n\r\n    }, [selectedCountry]);\r\n\r\n    // Add circle for selected year\r\n    useEffect(() => {\r\n        if (selectedYear !== null) {\r\n            // Remove previous circle if exists\r\n            d3.select(\"#figureTerrestrial\")\r\n            .select(\".figureTerrestrial__card\")\r\n            .selectAll(\".circle\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                console.log(tmpMap.get(selectedCountry).filter((d) => d.get('year') === selectedYear));\r\n                if (tmpMap.get(selectedCountry).filter((d) => d.get('year') === selectedYear).length !== 0) {\r\n                    const circle = d3.select(\"#figureTerrestrial\")\r\n                        .select(\".figureTerrestrial__card\")\r\n                        .append(\"circle\")\r\n                        .attr(\"class\", \"circle\")\r\n                        .attr(\"r\", 5)\r\n                        .attr(\"fill\", colorCountry)\r\n                        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                        .attr(\"cx\", getX(selectedYear))\r\n                        .attr(\"cy\", getY(tmpMap.get(selectedCountry).find((d) => d.get('year') === selectedYear).get('value')));\r\n                }\r\n            }\r\n            console.log(typeof selectedYear);\r\n            console.log(tmpMap.get('World').filter((d) => d.get('year') === selectedYear));\r\n            if(tmpMap.get(\"World\").filter((d) => d.get('year') === selectedYear).length !== 0) {\r\n                // Add circle for world\r\n                const circle = d3.select(\"#figureTerrestrial\")\r\n                    .select(\".figureTerrestrial__card\")\r\n                    .append(\"circle\")\r\n                    .attr(\"class\", \"circle\")\r\n                    .attr(\"r\", 5)\r\n                    .attr(\"fill\", colorWorld)\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                    .attr(\"cx\", getX(selectedYear))\r\n                    .attr(\"cy\", getY(tmpMap.get(\"World\").find((d) => d.get('year') === selectedYear).get('value')));\r\n            }\r\n        }\r\n        console.log(\"selectedYear\", selectedYear);\r\n    }, [selectedYear, selectedCountry]);\r\n\r\n    // Add legend for selected country and world\r\n    useEffect(() => {\r\n        if (selectedCountry !== null) {\r\n            // Remove previous legend if exists\r\n            d3.select(\"#figureTerrestrial\")\r\n            .select(\".figureTerrestrial__card\")\r\n            .selectAll(\"#legendCountry\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                const legendCountry = d3.select(\"#figureTerrestrial\")\r\n                    .select(\".figureTerrestrial__card\")\r\n                    .append(\"text\")\r\n                    .attr(\"id\", \"legendCountry\")\r\n                    .attr(\"class\", \"legendTerrestrial\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 20)\r\n                    .attr(\"fill\", colorCountry)\r\n                    .attr(\"transform\", \"translate(\" + ((width+margin.left)/2 + 30) + \", \" + (height + margin.top + margin.bottom/3) + \")\")\r\n                    .text(selectedCountry);\r\n            }\r\n        }\r\n    }, [selectedCountry]);\r\n\r\n    return (        \r\n        <div className=\"figureTerrestrial\" id=\"figureTerrestrial\">\r\n            <h3 className=\"figureTerrestrial__title\">Terrestrial</h3>\r\n            <svg\r\n                width=\"100%\" height=\"100%\"\r\n                className=\"figureTerrestrial__card\"\r\n                viewBox={`0 0 ${width + margin.left + margin.right} \r\n                                ${height + margin.top + margin.bottom}`}\r\n            >\r\n            {\r\n            // background rectangle\r\n            }\r\n                <rect\r\n                    x={0} y={0}\r\n                    width={width + margin.left + margin.right}\r\n                    height={height + margin.top + margin.bottom}\r\n                    fill=\"grey\"\r\n                    opacity={0.1}\r\n                />\r\n            {\r\n            // x- and y-axes\r\n            }\r\n                <g className=\"axis\" ref={getYAxis} \r\n                    transform={`translate(${margin.left},${margin.top})`}\r\n                />\r\n                <g\r\n                    className=\"axis xAxis\"\r\n                    ref={getXAxis}\r\n                    transform={`translate(${margin.left},${height + margin.top})`}\r\n                />\r\n            {\r\n            // line paths\r\n            }\r\n                <path strokeWidth={3} fill=\"none\" transform={`translate(${margin.left}, ${margin.top})`} stroke={colorWorld} d={linePathWorld} />\r\n            {\r\n            // y-axis label\r\n            }\r\n                <text\r\n                    transform={\"rotate(-90)\"}\r\n                    x={0 - (height + margin.top + margin.bottom) / 2 - 45} y={0 + margin.left/2 - 20} dy=\"1em\"\r\n                    color='black' className=\"axis-label\">\r\n                    {\"Percent of land area\"}\r\n                </text>\r\n            {\r\n                // world legend\r\n            }\r\n                <text\r\n                    className=\"legendTerrestrial\"\r\n                    x={0} y={20}\r\n                    transform={`translate(${(width+margin.left)/2 - 30},${height + margin.top + margin.bottom/3})`}\r\n                    fill={colorWorld}\r\n                >\r\n                    {\"World\"}\r\n                </text>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FigureTerrestrial;","import React, {useEffect, useRef, useState} from 'react';\r\nimport * as d3 from 'd3';\r\nimport './figureMarine.css';\r\n\r\nconst FigureMarine = ({selectedCountry, selectedYear, marineJSON}) => {\r\n\r\n    const margin = { top: 40, right: 50, bottom: 60, left: 60 },\r\n    width = 960 - margin.left - margin.right,\r\n    height = 400 - margin.top - margin.bottom,\r\n    colorWorld = \"DarkBlue\",\r\n    colorCountry = \"Blue\";\r\n\r\n    // import data from marineJSON\r\n    const tmpMap = new Map();\r\n    marineJSON.forEach((d) => {\r\n        let countryName = d.Country;\r\n        let data = d.Data;\r\n        const pointsList = [];\r\n        data.forEach((d) => {\r\n            const pointsMap = new Map();\r\n            let year = Number(d.Year);\r\n            let value = Number(d.Value);\r\n            pointsMap.set('year', year);\r\n            pointsMap.set('value', value);\r\n            pointsList.push(pointsMap);\r\n        });\r\n        tmpMap.set(countryName, pointsList);\r\n    });\r\n       \r\n    const yMinValue = d3.min(Array.from(tmpMap.values()), (d) => d3.min(d, (d2) => d2.get('value')))\r\n    const yMaxValue = d3.max(Array.from(tmpMap.values()), (d) => d3.max(d, (d2) => d2.get('value')))\r\n\r\n    const xMinValue = d3.min(Array.from(tmpMap.values()), (d) => d3.min(d, (d2) => d2.get('year')))\r\n    const xMaxValue = d3.max(Array.from(tmpMap.values()), (d) => d3.max(d, (d2) => d2.get('year')))\r\n\r\n    const getX = d3\r\n                .scaleTime()\r\n                .domain([xMinValue, xMaxValue])\r\n                .range([0, width]);\r\n\r\n    const getY = d3\r\n                .scaleLinear()\r\n                .domain([yMinValue - 1, yMaxValue + 2])\r\n                .range([height, 0]);\r\n\r\n    const getXAxis = (ref) => {\r\n        const xAxis = d3.axisBottom(getX);\r\n        d3.select(ref)\r\n        .attr(\"class\", \"x-axis\")\r\n        .call(xAxis.tickFormat(d3.format(\"d\")));\r\n    };\r\n\r\n    const getYAxis = (ref) => {\r\n        const yAxis = d3.axisLeft(getY).tickSize(-width).tickPadding(7);\r\n        d3.select(ref)\r\n        .attr(\"class\", \"y-axis\")\r\n        .call(yAxis);\r\n    };\r\n\r\n    const linePathWorld = d3\r\n                .line()\r\n                .x((d) => getX(d.get('year')))\r\n                .y((d) => getY(d.get('value')))\r\n                .curve(d3.curveMonotoneX)(tmpMap.get(\"World\"));\r\n\r\n    useEffect(() => {\r\n        if (selectedCountry !== null) {\r\n            // Remove previous path if exists, but keep the world path\r\n            d3.select(\"#figureMarine\")\r\n            .select(\".figureMarine__card\")\r\n            .selectAll(\".countryLine\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                const linePathCountry = d3\r\n                    .line()\r\n                    .x((d) => getX(d.get('year')))\r\n                    .y((d) => getY(d.get('value')))\r\n                    .curve(d3.curveMonotoneX)(tmpMap.get(selectedCountry));\r\n\r\n                // Add new path\r\n                d3.select(\"#figureMarine\")\r\n                    .select(\".figureMarine__card\")\r\n                    .append(\"path\")\r\n                    .attr(\"stroke-width\", 3)\r\n                    .attr(\"fill\", \"none\")\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                    .attr(\"stroke\", colorCountry)\r\n                    .attr(\"d\", linePathCountry)\r\n                    .attr(\"class\", \"countryLine\");\r\n            }\r\n        }        \r\n\r\n    }, [selectedCountry]);\r\n\r\n    // Add circle for selected country and world\r\n    useEffect(() => {\r\n        if (selectedYear !== null) {\r\n            // Remove previous circle if exists\r\n            d3.select(\"#figureMarine\")\r\n            .select(\".figureMarine__card\")\r\n            .selectAll(\".circle\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                if (tmpMap.get(selectedCountry).filter((d) => d.get('year') === selectedYear).length !== 0) {\r\n                    const circle = d3.select(\"#figureMarine\")\r\n                        .select(\".figureMarine__card\")\r\n                        .append(\"circle\")\r\n                        .attr(\"class\", \"circle\")\r\n                        .attr(\"r\", 5)\r\n                        .attr(\"fill\", colorCountry)\r\n                        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                        .attr(\"cx\", getX(selectedYear))\r\n                        .attr(\"cy\", getY(tmpMap.get(selectedCountry).find((d) => d.get('year') === selectedYear).get('value')));\r\n                }\r\n            }\r\n            if(tmpMap.get(\"World\").filter((d) => d.get('year') === selectedYear).length !== 0) {\r\n                // Add circle for world\r\n                const circle = d3.select(\"#figureMarine\")\r\n                    .select(\".figureMarine__card\")\r\n                    .append(\"circle\")\r\n                    .attr(\"class\", \"circle\")\r\n                    .attr(\"r\", 5)\r\n                    .attr(\"fill\", colorWorld)\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\r\n                    .attr(\"cx\", getX(selectedYear))\r\n                    .attr(\"cy\", getY(tmpMap.get(\"World\").find((d) => d.get('year') === selectedYear).get('value')));\r\n            }\r\n        }\r\n    }, [selectedYear, selectedCountry]);\r\n\r\n    // Add legend for selected country and world\r\n    useEffect(() => {\r\n        if (selectedCountry !== null) {\r\n            // Remove previous legend if exists\r\n            d3.select(\"#figureMarine\")\r\n            .select(\".figureMarine__card\")\r\n            .selectAll(\"#legendCountry\")\r\n            .remove();\r\n            if (tmpMap.has(selectedCountry)) {\r\n                const legendCountry = d3.select(\"#figureMarine\")\r\n                    .select(\".figureMarine__card\")\r\n                    .append(\"text\")\r\n                    .attr(\"class\", \"legendMarine\")\r\n                    .attr(\"id\", \"legendCountry\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"y\", 20)\r\n                    .attr(\"fill\", colorCountry)\r\n                    .attr(\"transform\", \"translate(\" + ((width+margin.left)/2 + 30) + \", \" + (height + margin.top + margin.bottom/3) + \")\")\r\n                    .text(selectedCountry);\r\n            }\r\n        }\r\n    }, [selectedCountry]);\r\n\r\n    return (        \r\n        <div className=\"figureMarine\" id=\"figureMarine\">\r\n            <h3 className=\"figureMarine__title\">Marine</h3>\r\n            <svg\r\n                width=\"100%\" height=\"100%\"\r\n                className=\"figureMarine__card\"\r\n                viewBox={`0 0 ${width + margin.left + margin.right} \r\n                                ${height + margin.top + margin.bottom}`}\r\n            >\r\n            {\r\n            // background rectangle\r\n            }\r\n                <rect\r\n                    x={0} y={0}\r\n                    width={width + margin.left + margin.right}\r\n                    height={height + margin.top + margin.bottom}\r\n                    fill=\"grey\"\r\n                    opacity={0.1}\r\n                />\r\n            {\r\n            // x- and y-axes\r\n            }\r\n                <g className=\"axis\" ref={getYAxis} \r\n                    transform={`translate(${margin.left},${margin.top})`}\r\n                />\r\n                <g\r\n                    className=\"axis xAxis\"\r\n                    ref={getXAxis}\r\n                    transform={`translate(${margin.left},${height + margin.top})`}\r\n                />\r\n            {\r\n            // line paths\r\n            }\r\n                <path strokeWidth={3} fill=\"none\" transform={`translate(${margin.left}, ${margin.top})`} stroke={colorWorld} d={linePathWorld} />\r\n            {\r\n            // y-axis label\r\n            }\r\n                <text\r\n                    transform={\"rotate(-90)\"}\r\n                    x={0 - (height + margin.top + margin.bottom) / 2 - 55} y={0 + margin.left/2 - 20} dy=\"1em\"\r\n                    color='black' className='axis-label'>\r\n                    {\"Percent of marine area\"}\r\n                </text>\r\n            {\r\n                // world legend\r\n            }\r\n                <text\r\n                    className=\"legendMarine\"\r\n                    x={0} y={20}\r\n                    transform={`translate(${(width+margin.left)/2 - 30},${height + margin.top + margin.bottom/3})`}\r\n                    fill={colorWorld}\r\n                >\r\n                    {\"World\"}\r\n                </text>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FigureMarine;","import React from 'react';\nimport './figureTree.css';\n\nconst FigureTree = () => {\n    return (\n        <div className=\"figureTree\" id=\"figureTree\">\n\n            <div className=\"figureTree__card\">\n                <h1 className='figureMap__card_title'>Phylogenetic tree</h1>\n\n                <iframe src=\"https://gavinkaa.github.io/dataviz_iframe/\" width=\"100%\" height=\"1000px\" frameBorder=\"0\">\n\n                </iframe>\n            </div>\n        </div>\n    );\n};\n\nexport default FigureTree;\n","import React from 'react';\nimport './header.css';\n\nconst Header = () => {\n    return (\n        <div id='header'>\n            <h1>Charting the Endangered</h1>\n        </div>\n    );\n};\n\nexport default Header;","import React from 'react';\nimport logo from '../../assets/logo.svg';\nimport './navbar.css';\n\nconst Navbar = () => {\n    return (\n        <div className=\"navbar\">\n            <div className=\"navbar__logo\">\n                <img src={logo} alt=\"logo\"/>\n            </div>\n            <div className=\"navbar__navbar-links\">\n                <p><a href=\"#map_related_figures\"> Map </a></p>\n                <p><a href=\"#protected_areas_figures\"> Protected areas </a></p>\n                <p><a href=\"#species_tree_figures\"> Species tree </a></p>\n            </div>\n        </div>\n    );\n};\n\nexport default Navbar;","import './slider.css';\r\nimport React, {useEffect, useRef, useState} from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nconst Slider = ({selectedYear, setSelectedYear}) => {\r\n    // Horizontal discrete slider from 2001 to 2021\r\n\r\n    var sliderNotCreated = true;\r\n    useEffect(() => {\r\n        if (sliderNotCreated) {\r\n            d3.select(\".sliderDiv\")\r\n                .append(\"input\")\r\n                .attr(\"type\", \"range\")\r\n                .attr(\"min\", 2001)\r\n                .attr(\"max\", 2021)\r\n                .attr(\"value\", selectedYear)\r\n                .attr(\"class\", \"slider\")\r\n                .on(\"input\", function() {\r\n                    setSelectedYear(Number(this.value));\r\n                });\r\n            sliderNotCreated = false;\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"sliderDiv\">\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Slider;\r\n","import './App.css';\nimport {\n    FigureDistrib,\n    FigureMap,\n    FigureMarine,\n    FigureTerrestrial,\n    FigureTree,\n    FigureTreeCountry,\n    FigureTreeWorld,\n    Header,\n    Navbar,\n    Slider\n} from \"./components\";\nimport React, {useState} from \"react\";\nimport iucn_red_list from \"./data/iucn_red_list.csv\";\nimport countryIucnCatRepartition from \"./data/country_iucn_cat_repartition.json\";\nimport countrySpeciesRepartition from \"./data/country_species_repartition.json\";\nimport terrestial from \"./data/country_terrestrial_protected_area.json\";\nimport marine from \"./data/country_marine_protected_area.json\";\n\nfunction App() {\n\n    const [selectedYear, setSelectedYear] = useState(2020);\n    const [selectedCountry, setSelectedCountry] = useState(null);\n\n    const [iucnRedListCSV] = useState(iucn_red_list);\n\n    return (\n        <div className=\"App\">\n            <div className=\"gradient__bg\">\n                <Navbar/>\n                <Header/>\n            </div>\n            <div id=\"content\">\n                <div className='slider'>\n                    <Slider selectedYear={selectedYear} setSelectedYear={setSelectedYear}/>\n                </div>\n                <div className='figures' id=\"map_related_figures\">\n                    <div>\n                        <FigureMap selectedCountry={selectedCountry} setSelectedCountry={setSelectedCountry}\n                                   selectedYear={selectedYear} iucnRedListCSV={iucnRedListCSV}/>\n                    </div>\n                    <div>\n                        <FigureDistrib countryIucnCatRepartition={countryIucnCatRepartition}\n                                       countrySpeciesRepartition={countrySpeciesRepartition}\n                                       selectedCountry={selectedCountry}/>\n\n                    </div>\n                </div>\n                <div className='figures' id=\"protected_areas_figures\">\n                    <h1 id=\"protected_areas_figures__title\">Protected areas by year</h1>\n                    <table className='graphTable'>\n                        <tbody>\n                        <tr className='graphTR'>\n                            <td className='graphTD'>\n                                <FigureTerrestrial selectedCountry={selectedCountry} selectedYear={selectedYear} terrestrialJSON={terrestial}/>\n                            </td>\n                        </tr>\n                        <tr className='graphTR'>\n                            <td className='graphTD'>\n                                <FigureMarine selectedCountry={selectedCountry} selectedYear={selectedYear} marineJSON={marine} />\n                            </td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n                <div className='figures' id=\"species_tree_figures\">\n                    <FigureTree/>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>\n);\n","module.exports = __webpack_public_path__ + \"static/media/worldMap.9e2bba46.geojson\";","module.exports = __webpack_public_path__ + \"static/media/logo.7b390023.svg\";","module.exports = __webpack_public_path__ + \"static/media/iucn_red_list.f5158aa8.csv\";"],"sourceRoot":""}